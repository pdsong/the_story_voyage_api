# F18: 小组共读 (Buddy Reads)

## 功能概述
用户可以发起或加入小组共读（Buddy Reads），与最多 9 名朋友一起阅读同一本书。此功能旨在促进朋友间的阅读交流和互动。

## 主要特性
1.  **创建共读**: 任何用户都可以发起共读，选择书籍和开始日期。
2.  **加入限制**:
    *   每个共读最多 9 人参加。
    *   只有发起者的**互相关注的朋友**可以加入。
    *   发起者自动加入。
3.  **列表查看**: 用户只能看到自己参与的共读，或者朋友发起的共读。

## API 端点

### 1. 获取共读列表
*   **URL**: `GET /api/v1/buddy_reads`
*   **权限**: 需登录
*   **描述**: 获取用户可见的共读列表（我参与的 + 朋友创建的）。
*   **响应**:
    ```json
    {
      "data": [
        {
          "id": 1,
          "book_id": 101,
          "creator_id": 5,
          "status": "active",
          "start_date": "2026-03-01",
          "participants": [...]
        }
      ]
    }
    ```

### 2. 创建共读
*   **URL**: `POST /api/v1/buddy_reads`
*   **权限**: 需登录
*   **参数**:
    ```json
    {
      "buddy_read": {
        "book_id": 101,
        "start_date": "2026-03-01"
      }
    }
    ```
*   **响应**: `201 Created`

### 3. 查看详情
*   **URL**: `GET /api/v1/buddy_reads/:id`
*   **权限**: 需登录
*   **响应**: 共读详情，包含参与者列表。

### 4. 加入共读
*   **URL**: `POST /api/v1/buddy_reads/:id/join`
*   **权限**: 需登录 (仅限发起者的朋友且未满员)
*   **响应**:
    *   成功: `201 Created`
    *   满员: `422 Unprocessable Entity` (或自定义错误)
    *   非朋友: `403 Forbidden`

## 数据库设计
*   **BuddyRead**: 存储共读基本信息 (书籍, 发起者, 开始日期)。
*   **BuddyReadParticipant**: 存储参与者关联。

## 权限控制
*   **可见性**: 仅朋友可见。
*   **加入**: 仅朋友可加入。
